<div class="sidebar">
  <h2 class="sidebar-title">Collections</h2>

  <button (click)="triggerFileInput()">Import</button>
  <input type="file" (change)="importCollection($event)" style="display: none;">
  
  <input type="text" class="search-bar" placeholder="Search requests..." [(ngModel)]="searchTerm">

  <ul class="sidebar-list">
    <li *ngFor="let collection of collections">
      <div class="collection-header">
        <span (click)="loadRequests(collection.id)">
          {{ collection.name }}
          <span class="caret" [class.rotate]="expandedCollections[collection.id]">‚ñ≤</span>
        </span>

        <div class="menu-container">
          <button class="menu-button" (click)="toggleMenu(collection.id, $event)">‚ãÆ</button>
          <div class="menu-dropdown" *ngIf="menuOpenCollectionId === collection.id">
            <button (click)="exportCollection(collection.id)">Export</button>
          </div>
        </div>
      </div>

      <ul *ngIf="expandedCollections[collection.id]" class="dropdown-list">
        <li *ngFor="let request of filteredRequests(collection.requests)"
            class="request-item"
            (click)="selectRequest(request)">
          <span class="request-method method-{{ request.method.toLowerCase() }}">
            {{ request.method }}
          </span>
          {{ request.name }}
          <button class="delete-button" (click)="deleteRequest(request)">üóëÔ∏è</button>
        </li>
      </ul>
    </li>
  </ul>
</div>
